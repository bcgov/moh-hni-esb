# This is a basic workflow to help you get started with Actions

name: test

# Controls when the workflow will run
on:
  # Triggers the workflow on push or pull request events but only for the main branch


  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:
    inputs:
      OPENSHIFT_IMAGE_TAG:
        description: 'Optional parameter for additional tags on released images. '
        required: false
        default: vTest
        type: string
      
# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  # This workflow contains a single job called "build"
  createTagInGit:
    runs-on:  ubuntu-latest
    
    steps:
      # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
      # It should get the code from branch that triggered this workflow
      - name: Check out code
        id: checkout
        uses: actions/checkout@v3
        with:
          ref: main
    # Tag and push the tag
      - name: Tag the commit with Release number
        id: tag
        uses: actions-ecosystem/action-push-tag@v1
        with:
          tag: v${{needs.createHniEsbRelease.outputs.RELEASE_VERSION}}
          message: 'Tag generated by GitHub Actions: release-hniesb.'
